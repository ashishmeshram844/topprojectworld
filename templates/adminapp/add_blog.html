{% extends 'adminapp/admin_base.html' %}


{% block extra_css %}
<script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>

<script>
  tinymce.init({
    selector: '#write_blog',
    plugins: [
    'advlist autolink link image lists charmap print preview hr anchor pagebreak',
    'searchreplace wordcount visualblocks code fullscreen insertdatetime media nonbreaking',
    'table emoticons template paste help'
  ],
  toolbar: 'undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | ' +
    'bullist numlist outdent indent | link image | print preview media fullpage | ' +
    'forecolor backcolor emoticons | help',
  menu: {
    favs: {title: 'My Favorites', items: 'code visualaid | searchreplace | emoticons'}
  },
  menubar: 'favs file edit view insert format tools table help',
  content_style: 'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }'
  });
</script>

<style>
    #write_blog{
        height: 800px;
    }
</style>

{% endblock %}


{% block content %}

    <!-- Page Header-->
    <div class="page-header no-margin-bottom">
        <div class="container-fluid">
          <h2 class="h5 no-margin-bottom">Add New Blog</h2>
        </div>
      </div>
      <!-- Breadcrumb-->
      <div class="container-fluid">
        <center>
        <ul class="breadcrumb">
          
          {% for i in messages %}
          <h4 style="color: green;">{{i}}</h4>
          {% endfor %}
          
        </ul>
        </center>
      </div>
      <section class="no-padding-top">
        <div class="container-fluid">
          <div class="row">
            <!-- Basic Form-->
            <div class="col-lg-12">
              <div class="block">
                <div class="block-body">
                    
                    {% if blog %}

                    <form method="POST" enctype="multipart/form-data" action="{% url 'update_blog_detail' blog.id %}">
                        {% csrf_token %}
    
                        <div class="form-group">
                            <label class="form-control-label">Blog Heading / Name</label>
                            <input type="text" required placeholder="heading" value="{{blog.heading}}" name="heading" class="form-control">
                        </div>
    
                        <div class="form-group">
                            <label class="form-control-label">Image</label>
                            <input type="file"  placeholder="image" name="image" class="form-control">
                            <a href="/media/{{blog.image}}">
                                <img src="/media/{{blog.image}}" width="100px" height="100px">
                            </a>
                        </div>


                        <div class="form-group">
                            <label class="form-control-label">Description</label>
                            <textarea required placeholder="Enter your description" name="description"  class="form-control">{{blog.description}}</textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-control-label">Attach Video</label>
                            {% if blog.blog_detail.video %}
                            <a href="/media/{{blog.blog_detail.video}}" target="_blank">Old VIdeo File</a>
                            {% endif %}
                            <input type="file" placeholder="video" name="video" class="form-control">
                        </div>

                        <div class="form-group">
                            <label class="form-control-label">Attach Document File</label>
                            {% if blog.blog_detail.doc_file %}
                            <a href="/media/{{blog.blog_detail.doc_file}}" target="_blank">Old Doc File</a>
                            {% endif %}
                            <input type="file" placeholder="doc_file" name="doc_file" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-control-label">Write Blog</label>
                            <textarea placeholder="Enter your Blog" name="write_blog" id="write_blog"  class="form-control">{{blog.blog_detail.write_blog}}</textarea>
                        </div>



                    
                        <center>
                        <div class="form-group">       
                          <input type="submit" value="UPDATE BLOG DETAIL" class="btn btn-primary">
                        </div>
                        </center>
                      </form>

                    {% else %}
                  <form method="POST" enctype="multipart/form-data">
                    {% csrf_token %}

                    <div class="form-group">
                        <label class="form-control-label">Blog Heading / Name</label>
                        <input type="text" required placeholder="heading" name="heading" class="form-control">
                    </div>

                    <div class="form-group">
                        <label class="form-control-label">Image</label>
                        <input type="file" required placeholder="image" name="image" class="form-control">
                    </div>
                   
                    <div class="form-group">
                        <label class="form-control-label"> Description</label>
                        <textarea required placeholder="Enter your Description" name="description" class="form-control"></textarea>
                    </div>

                
                    <center>
                    <div class="form-group">       
                      <input type="submit" value="ADD BLOG" class="btn btn-primary">
                    </div>
                    </center>
                  </form>

                  {% endif %}
               
                </div>
              </div>
            </div>
                       
          </div>
        </div>
      </section>

{% endblock %}


